<div class="editor-container">
    <app-notifications></app-notifications>
    <header class="editor-toolbar">
        <div class="doc-info">
            <h2>{{ document.name }}</h2>
            <span class="doc-type">{{ document.type }}</span>
        </div>

        <div class="toolbar-actions">
            <button (click)="toggleBold()" title="Negrita">
                <i class="fa-solid fa-bold"></i>
            </button>
            <button (click)="toggleItalic()" title="Cursiva">
                <i class="fa-solid fa-italic"></i>
            </button>
            <button (click)="toggleUnderline()" title="Subrayado">
                <i class="fa-solid fa-underline"></i>
            </button>

            <div class="divider"></div>

            <button (click)="setAlignment('left')" [class.active]="alignment === 'left'">
                <i class="fa-solid fa-align-left"></i>
            </button>
            <button (click)="setAlignment('center')" [class.active]="alignment === 'center'">
                <i class="fa-solid fa-align-center"></i>
            </button>
            <button (click)="setAlignment('right')" [class.active]="alignment === 'right'">
                <i class="fa-solid fa-align-right"></i>
            </button>

            <div class="divider"></div>

            <button (click)="toggleWordCount()" [class.active]="useWordCount" title="Contador de palabras">
                <i class="fa-solid fa-list-ol"></i>
            </button>
            <button (click)="toggleSyntaxHighlight()" [class.active]="useSyntaxHighlight" title="Resaltado Markdown">
                <i class="fa-solid fa-code"></i>
            </button>
            <button (click)="toggleTextFormat()" [class.active]="useTextFormat" title="Formato de texto">
                <i class="fa-solid fa-text-height"></i>
            </button>
            <button (click)="toggleAutoSave()" [class.active]="useAutoSave" title="Guardado automÃ¡tico">
                <i class="fa-solid fa-robot"></i>
            </button>

            <button (click)="saveDocument()" class="save-btn">
                <i class="fa-solid fa-save"></i>
            </button>
        </div>
    </header>

    <main class="editor-body">
        <div class="editor-area">
            <div #editor class="editable" contenteditable="true" (input)="onEditorInput()" [innerText]="content" dir="ltr" spellcheck="true" [attr.placeholder]="'Empieza a escribir aquÃ­... Usa # para encabezados, ** para negrita, etc.'">
            </div>
        </div>

        <!-- Mantener presencia integrada (usuarios + chat) pero quitar la vista previa del contenido -->
        <aside class="preview-area">
            <section class="embedded-presence">
                <app-user-list></app-user-list>
                <div class="spacer-8" aria-hidden="true"></div>
                <app-chat></app-chat>
            </section>
        </aside>
    </main>

    <footer class="editor-footer">
        <div class="footer-left">
            <span>CaracterÃ­sticas: 
                <span *ngIf="useWordCount">Contador</span>
            <span *ngIf="useSyntaxHighlight">, Markdown</span>
            <span *ngIf="useTextFormat">, Formato</span>
            <span *ngIf="useAutoSave">, Auto-guardado</span>
            </span>
        </div>
        <div class="footer-right">
            <span>Palabras: {{ wordCount }}</span>
            <span *ngIf="useAutoSave" class="auto-save-indicator">ðŸ’¾</span>
        </div>
    </footer>
</div>